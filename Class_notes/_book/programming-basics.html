<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Notes for Math 253: Statistical Computing and Machine Learning</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Notes and other materials for Math 253 at Macalester College.">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="Notes for Math 253: Statistical Computing and Machine Learning" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Notes and other materials for Math 253 at Macalester College." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Notes for Math 253: Statistical Computing and Machine Learning" />
  
  <meta name="twitter:description" content="Notes and other materials for Math 253 at Macalester College." />
  

<meta name="author" content="Daniel Kaplan">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="support-vector-classifiers.html">
<link rel="next" href="appendices.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Math 253 Notes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Placeholder</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="part"><span><b>I Topic I: Linear Regression</b></span></li>
<li class="chapter" data-level="3" data-path="placeholder-1.html"><a href="placeholder-1.html"><i class="fa fa-check"></i><b>3</b> Placeholder</a></li>
<li class="chapter" data-level="4" data-path="notes.html"><a href="notes.html"><i class="fa fa-check"></i><b>4</b> Notes</a></li>
<li class="chapter" data-level="5" data-path="foundations-linear-algebra-likelihood-and-bayes-rule.html"><a href="foundations-linear-algebra-likelihood-and-bayes-rule.html"><i class="fa fa-check"></i><b>5</b> Foundations: linear algebra, likelihood and Bayes’ rule</a></li>
<li class="chapter" data-level="6" data-path="classifiers.html"><a href="classifiers.html"><i class="fa fa-check"></i><b>6</b> Classifiers</a></li>
<li class="chapter" data-level="7" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>7</b> Logistic Regression</a></li>
<li class="chapter" data-level="8" data-path="linear-and-quadratic-discriminant-analysis.html"><a href="linear-and-quadratic-discriminant-analysis.html"><i class="fa fa-check"></i><b>8</b> Linear and Quadratic Discriminant Analysis</a></li>
<li class="chapter" data-level="9" data-path="cross-validation-and-bootstrapping.html"><a href="cross-validation-and-bootstrapping.html"><i class="fa fa-check"></i><b>9</b> Cross-Validation and Bootstrapping</a></li>
<li class="chapter" data-level="10" data-path="regularization-shrinkage-and-dimension-reduction.html"><a href="regularization-shrinkage-and-dimension-reduction.html"><i class="fa fa-check"></i><b>10</b> Regularization, shrinkage and dimension reduction</a></li>
<li class="chapter" data-level="11" data-path="nonlinearity-in-linear-models.html"><a href="nonlinearity-in-linear-models.html"><i class="fa fa-check"></i><b>11</b> Nonlinearity in linear models</a></li>
<li class="chapter" data-level="12" data-path="trees-for-regression-and-classification.html"><a href="trees-for-regression-and-classification.html"><i class="fa fa-check"></i><b>12</b> Trees for Regression and Classification</a></li>
<li class="chapter" data-level="13" data-path="support-vector-classifiers.html"><a href="support-vector-classifiers.html"><i class="fa fa-check"></i><b>13</b> Support Vector Classifiers</a></li>
<li class="chapter" data-level="14" data-path="programming-basics.html"><a href="programming-basics.html"><i class="fa fa-check"></i><b>14</b> Programming Basics</a><ul>
<li class="chapter" data-level="14.1" data-path="programming-basics.html"><a href="programming-basics.html#programming-basics-i-names-classes-and-objects-progbasics1"><i class="fa fa-check"></i><b>14.1</b> Programming Basics I: Names, classes, and objects {progbasics1}</a><ul>
<li class="chapter" data-level="14.1.1" data-path="programming-basics.html"><a href="programming-basics.html#names"><i class="fa fa-check"></i><b>14.1.1</b> Names</a></li>
<li class="chapter" data-level="14.1.2" data-path="programming-basics.html"><a href="programming-basics.html#objects"><i class="fa fa-check"></i><b>14.1.2</b> Objects</a></li>
<li class="chapter" data-level="14.1.3" data-path="programming-basics.html"><a href="programming-basics.html#vectors"><i class="fa fa-check"></i><b>14.1.3</b> Vectors</a></li>
<li class="chapter" data-level="14.1.4" data-path="programming-basics.html"><a href="programming-basics.html#matrices"><i class="fa fa-check"></i><b>14.1.4</b> Matrices</a></li>
<li class="chapter" data-level="14.1.5" data-path="programming-basics.html"><a href="programming-basics.html#lists"><i class="fa fa-check"></i><b>14.1.5</b> Lists</a></li>
<li class="chapter" data-level="14.1.6" data-path="programming-basics.html"><a href="programming-basics.html#functions"><i class="fa fa-check"></i><b>14.1.6</b> Functions</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="programming-basics.html"><a href="programming-basics.html#programming-basics-linear-models"><i class="fa fa-check"></i><b>14.2</b> Programming basics: Linear Models</a><ul>
<li class="chapter" data-level="14.2.1" data-path="programming-basics.html"><a href="programming-basics.html#graphics-basics"><i class="fa fa-check"></i><b>14.2.1</b> Graphics basics</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="programming-basics.html"><a href="programming-basics.html#k-nearest-neighbors"><i class="fa fa-check"></i><b>14.3</b> K-nearest neighbors</a></li>
<li class="chapter" data-level="14.4" data-path="programming-basics.html"><a href="programming-basics.html#loopsiteration"><i class="fa fa-check"></i><b>14.4</b> Loops/Iteration</a></li>
<li class="chapter" data-level="14.5" data-path="programming-basics.html"><a href="programming-basics.html#parts-of-a-loop"><i class="fa fa-check"></i><b>14.5</b> Parts of a loop</a></li>
<li class="chapter" data-level="14.6" data-path="programming-basics.html"><a href="programming-basics.html#trivial-examples"><i class="fa fa-check"></i><b>14.6</b> Trivial examples</a></li>
<li class="chapter" data-level="14.7" data-path="programming-basics.html"><a href="programming-basics.html#bootstrapping"><i class="fa fa-check"></i><b>14.7</b> Bootstrapping</a></li>
<li class="chapter" data-level="14.8" data-path="programming-basics.html"><a href="programming-basics.html#leave-one-out-cross-validation."><i class="fa fa-check"></i><b>14.8</b> Leave-one-out cross-validation.</a></li>
<li class="chapter" data-level="14.9" data-path="programming-basics.html"><a href="programming-basics.html#building-a-package"><i class="fa fa-check"></i><b>14.9</b> Building a package</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendices.html"><a href="appendices.html"><i class="fa fa-check"></i>Appendices</a></li>
<li class="chapter" data-level="" data-path="connecting-rstudio-to-your-github-repository.html"><a href="connecting-rstudio-to-your-github-repository.html"><i class="fa fa-check"></i>Connecting RStudio to your GitHub repository</a></li>
<li class="chapter" data-level="" data-path="instructions-for-the-publishing-system-bookdown.html"><a href="instructions-for-the-publishing-system-bookdown.html"><i class="fa fa-check"></i>Instructions for the publishing system: Bookdown</a></li>
<li class="divider"></li>
<li><a href="https://github.com/dtkaplan/math253" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Notes for Math 253: Statistical Computing and Machine Learning</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="programming-basics" class="section level1">
<h1><span class="header-section-number">Topic 14</span> Programming Basics</h1>
<div id="programming-basics-i-names-classes-and-objects-progbasics1" class="section level2">
<h2><span class="header-section-number">14.1</span> Programming Basics I: Names, classes, and objects {progbasics1}</h2>
<div id="names" class="section level3">
<h3><span class="header-section-number">14.1.1</span> Names</h3>
<p>Composed of letters, numbers, <code>_</code> and <code>.</code>.<br />
- Don’t use <code>.</code> — it’s a bad habit. But plenty of people do. - Can’t lead with a number. - Capitalization counts. - Unquoted (… almost always)</p>
</div>
<div id="objects" class="section level3">
<h3><span class="header-section-number">14.1.2</span> Objects</h3>
<p>Information (bits) in a particular format.<br />
- Different formats for different purposes. - The format is the <code>class()</code> or <code>mode()</code>. <code>mode</code> is more basic than <code>class</code>.</p>
<p><strong>Assignment</strong>: Give a name to an object</p>
</div>
<div id="vectors" class="section level3">
<h3><span class="header-section-number">14.1.3</span> Vectors</h3>
<p>1-dimensional homogeneous collections of numbers, character strings, booleans/logicals, etc.</p>
<div id="must-know" class="section level4">
<h4><span class="header-section-number">14.1.3.1</span> Must Know!</h4>
<p>There are some basic types of vectors. The most common are:</p>
<ol style="list-style-type: decimal">
<li><strong>numeric</strong>, e.g. <code>3</code>, <code>3.14159</code>, <code>6.023e26</code>,<code>6.626196e-34</code></li>
<li><strong>character</strong>, e.g. <code>&quot;hello&quot;</code>, `“When in the course of human events …”</li>
<li><strong>logical</strong> (or “booleans”). The only allowable values: <code>TRUE</code> and <code>FALSE</code></li>
</ol>
<p>Much of the software you’ll use in this course will work with an alternative to character strings called “factors.”</p>
<ol start="4" style="list-style-type: decimal">
<li><strong>factor</strong>, an encoded representation of levels of a categorical variable.</li>
</ol>
<p>Some operations you will use when dealing with categorical variables are <code>as.character()</code> and (for older software) <code>as.factor()</code>.</p>
<p>Vectors are “1-dimensional” collections. That is, you need only one index to refer to a specific element.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;berry&quot;</span>, <span class="st">&quot;cherry&quot;</span>)
my_vector[<span class="dv">2</span>]</code></pre></div>
<pre><code>## [1] &quot;berry&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_vector[<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>)]</code></pre></div>
<pre><code>## [1] &quot;cherry&quot; &quot;apple&quot;  &quot;berry&quot;  &quot;berry&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_vector[<span class="dv">4</span>] &lt;-<span class="st"> &quot;durian&quot;</span></code></pre></div>
<p>Boolean indexing</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_vector[my_vector &gt;<span class="st"> &quot;b&quot;</span>]</code></pre></div>
<pre><code>## [1] &quot;berry&quot;  &quot;cherry&quot; &quot;durian&quot;</code></pre>
<p>If you want, you can convert the boolean style to a number style with <code>which()</code>.</p>
<p>Other important functions:</p>
<ul>
<li><code>length()</code>, to say how many elements there are in the vector. The length can be zero.</li>
<li>Arithmetic operations, e.g. <code>sum()</code>, <code>mean()</code>, <code>max()</code>, <code>cumsum()</code>, and other functions (e.g. <code>sqrt()</code>, <code>log()</code>, <code>sin()</code>), …</li>
<li>Logical operations, that is, operations that transform vectors into a logical vector. Examples:
<ul>
<li>Comparison: <code>&gt;</code>, <code>==</code>, <code>&gt;=</code>, <code>!=</code>, <code>&lt;</code>, <code>&lt;=</code></li>
<li>Boolean operations: <code>!</code>, <code>|</code>, <code>&amp;</code>. (Note, these are single characters.)</li>
</ul></li>
<li>Categorical operations, e.g. <code>table()</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">funny &lt;-<span class="st"> </span><span class="kw">ceiling</span>(<span class="kw">length</span>(my_vector)*<span class="kw">runif</span>(<span class="dv">10</span>))
my_vector[funny]</code></pre></div>
<pre><code>##  [1] &quot;berry&quot;  &quot;apple&quot;  &quot;cherry&quot; &quot;berry&quot;  &quot;durian&quot; &quot;cherry&quot; &quot;durian&quot;
##  [8] &quot;durian&quot; &quot;durian&quot; &quot;durian&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(my_vector)</code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(my_vector)</code></pre></div>
<pre><code>## NULL</code></pre>
</div>
</div>
<div id="matrices" class="section level3">
<h3><span class="header-section-number">14.1.4</span> Matrices</h3>
<ul>
<li>2-dimensional homogeneous collections of numbers or of character strings. These collections are called <em>matrices</em>
<ul>
<li>2-dimensional means you need two indices to refer to a specific element.</li>
<li><code>dim()</code></li>
<li>Operations, e.g., <code>t()</code>, <code>colSums()</code>, <code>rowSums()</code>, <code>%*%</code>, …</li>
<li>Index matrices with <code>[ , ]</code>. You need to give two</li>
</ul></li>
</ul>
</div>
<div id="lists" class="section level3">
<h3><span class="header-section-number">14.1.5</span> Lists</h3>
<p>1-dimensional heterogeneous collections</p>
<ul>
<li>create with <code>list()</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_list &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">magic =</span> <span class="dv">1</span>:<span class="dv">10</span>, <span class="dt">greeting =</span> <span class="st">&quot;hello&quot;</span>, <span class="dt">is_wednesday =</span> <span class="ot">FALSE</span>)
my_list[<span class="kw">c</span>(<span class="st">&quot;greeting&quot;</span>, <span class="st">&quot;magic&quot;</span>, <span class="st">&quot;magic&quot;</span>)]</code></pre></div>
<pre><code>## $greeting
## [1] &quot;hello&quot;
## 
## $magic
##  [1]  1  2  3  4  5  6  7  8  9 10
## 
## $magic
##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_list$magic</code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<ul>
<li>index with <code>[[ ]]</code> or <code>[ ]</code>. The first is for an individual item which you want in the form of that item itself. The second is to create a subset of the list which will be a list itself.</li>
<li><p>you can name items in lists and refer to them by name. <code>[[&quot;name&quot;]]</code> To set names of list items, use named arguments to <code>list()</code> or use the <code>names()</code> function on the left-hand side of the <code>&lt;-</code> operation. (The left-hand side of <code>&lt;-</code> is called an “assignable.” These can be names, but they can be other things as well such as indexed arrays, <code>names()</code>, etc.)</p></li>
<li><p>Data frames</p></li>
</ul>
<p>A list of vectors.</p>
<ul>
<li>Each component in a given vector must be the same kind of thing as the other components. (Special cases: <code>NA</code> for missing data. Two more special things for numerical data.<code>NaN</code>, &amp; <code>Inf</code>)</li>
<li>Important functions: <code>nrow()</code>, <code>names()</code>, <code>$</code>.</li>
</ul>
</div>
<div id="functions" class="section level3">
<h3><span class="header-section-number">14.1.6</span> Functions</h3>
<p>Take inputs and produce an output (and maybe a side-effect). - Make them with <code>function(){ }</code>, a special form. (It’s not actually a function!) - Try this</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(sin)
<span class="kw">class</span>(<span class="dv">3</span>)
<span class="kw">class</span>(<span class="st">&quot;a string&quot;</span>)
<span class="kw">class</span>(function)</code></pre></div>
<pre><code>## Error: &lt;text&gt;:4:15: unexpected &#39;)&#39;
## 3: class(&quot;a string&quot;)
## 4: class(function)
##                  ^</code></pre>
</div>
</div>
<div id="programming-basics-linear-models" class="section level2">
<h2><span class="header-section-number">14.2</span> Programming basics: Linear Models</h2>
<p>Syntactic element: <strong>formulas</strong>. Formulas provide a way of using variables “symbolically.” This is useful, for instance, in depicting the desired relationship among variables. Two forms:</p>
<ul>
<li><code>y ~ x</code> two-sided</li>
<li><code>~ x</code> one-sided</li>
<li>NOT ALLOWED, <code>y ~</code></li>
</ul>
<p>Important functions:</p>
<ul>
<li><code>lm()</code>, <code>predict()</code> , <code>anova()</code>, <code>summary()</code>.</li>
<li>For later: <code>solve()</code>, <code>model.matrix()</code>.</li>
<li>From 155: <code>coef()</code>, <code>fitted()</code>, <code>resid()</code></li>
</ul>
<p>Training with <code>lm()</code>: Specify formula <code>Y ~ X1 + X2</code> …</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(College, <span class="dt">package =</span> <span class="st">&quot;ISLR&quot;</span>)
mod &lt;-<span class="st"> </span><span class="kw">lm</span>(Outstate ~<span class="st"> </span>Enroll +<span class="st"> </span>Accept +<span class="st"> </span>perc.alumni, <span class="dt">data =</span> College ) 
<span class="kw">coef</span>(mod)</code></pre></div>
<pre><code>## (Intercept)      Enroll      Accept perc.alumni 
## 6387.368606   -2.888077    1.101019  179.528731</code></pre>
<p>What kind of thing is <code>mod</code>?</p>
<p>Model output with <code>predict()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">predict</span>(mod, 
        <span class="dt">newdata =</span> <span class="kw">data.frame</span>(<span class="dt">Enroll =</span> <span class="dv">100</span>, <span class="dt">Accept =</span> <span class="dv">1000</span>, <span class="dt">perc.alumni =</span> <span class="dv">25</span>))</code></pre></div>
<pre><code>##       1 
## 11687.8</code></pre>
<p>What kind of thing is the output of <code>predict()</code>?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">predict</span>(mod, <span class="dt">interval =</span> <span class="st">&quot;confidence&quot;</span>,
        <span class="dt">newdata =</span> <span class="kw">data.frame</span>(<span class="dt">Enroll =</span> <span class="dv">100</span>, <span class="dt">Accept =</span> <span class="dv">1000</span>, <span class="dt">perc.alumni =</span> <span class="dv">25</span>))</code></pre></div>
<pre><code>##       fit      lwr      upr
## 1 11687.8 11383.57 11992.03</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">predict</span>(mod, <span class="dt">interval =</span> <span class="st">&quot;prediction&quot;</span>,
        <span class="dt">newdata =</span> <span class="kw">data.frame</span>(<span class="dt">Enroll =</span> <span class="dv">100</span>, <span class="dt">Accept =</span> <span class="dv">1000</span>, <span class="dt">perc.alumni =</span> <span class="dv">25</span>))</code></pre></div>
<pre><code>##       fit      lwr      upr
## 1 11687.8 5548.956 17826.64</code></pre>
<p>Why is the “confidence interval” so much narrower than the “prediction interval?”</p>
<p><strong>Inference</strong> with <code>anova()</code> and <code>summary()</code>. This is all “in-sample” inference, not cross-validated.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">M &lt;-<span class="st"> </span><span class="kw">model.matrix</span>(~<span class="st"> </span>Enroll +<span class="st"> </span>Accept *<span class="st"> </span>perc.alumni, <span class="dt">data =</span> College)
<span class="kw">qr.solve</span>(M, College$Outstate)</code></pre></div>
<pre><code>##        (Intercept)             Enroll             Accept 
##      7024.34843865        -3.00377409         0.78401053 
##        perc.alumni Accept:perc.alumni 
##       147.31268325         0.02011475</code></pre>
<p>For the people who have had linear algebra, why doesn’t this work?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">solve</span>(M, College$Outstate)</code></pre></div>
<pre><code>## Error in solve.default(M, College$Outstate): &#39;a&#39; (777 x 5) must be square</code></pre>
<p><a href="../ProgrammingActivities/Day-03-Programming.html">Indexing on data: training and testing data sets</a></p>
<div id="graphics-basics" class="section level3">
<h3><span class="header-section-number">14.2.1</span> Graphics basics</h3>
<ol style="list-style-type: decimal">
<li>API for graphics: <code>plot()</code>, <code>points()</code>, <code>lines()</code>, <code>polygon()</code>, <code>text()</code>, …</li>
</ol>
</div>
</div>
<div id="k-nearest-neighbors" class="section level2">
<h2><span class="header-section-number">14.3</span> K-nearest neighbors</h2>
<p>K-nearest neighbors is a simple, general kind of function-building method. But some problems:</p>
<ul>
<li>Interpretability: but you can always take partial derivatives.</li>
<li>When you have prediction (aka “explanatory”) variables in dollars and in miles, how do you calculate the distance between points? What are the dimensions of distance?
<ul>
<li>Dimensionality refers to the physical feature, e.g. time, distance, area, volume, money, charge, luminance, mass, …</li>
<li>Units are the ways in which dimensions are measured, e.g., cups, gallons, liters … all refer to volume
<ul>
<li>Give some examples of units for each of the dimensions.</li>
<li>Some everyday quantities are dimensionless, e.g. pure numbers. Give some examples: … (angles, percent, fractions, … but not ratios in general.)</li>
</ul></li>
<li>Regression fixes units automatically, since the coefficients themselves have dimensionality. They will adjust automatically to changes in units, so the model is the same regardless of whether we use miles, km, parsecs, …</li>
<li>In KNN, to avoid dependence on units, need to do some standardization by dividing by something in the same units, e.g. sd.</li>
</ul></li>
<li>Curse of dimensionality. Let’s create 1000 randomly placed points in the unit square:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rpts &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">runif</span>(<span class="dv">2</span>*<span class="dv">1000</span>), <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre></div>
<p>What’s the distribution of distances from a single random point to the 1000 others:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">our_point &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">2</span>)</code></pre></div>
<p>The distance between our point and each of the others</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tmp &lt;-<span class="st"> </span><span class="kw">matrix</span>(our_point, <span class="dt">ncol=</span><span class="dv">2</span>, <span class="dt">nrow=</span><span class="dv">1000</span>, <span class="dt">byrow=</span><span class="ot">TRUE</span>)
delta &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">rowSums</span>((rpts -<span class="st"> </span>tmp)^<span class="dv">2</span>))</code></pre></div>
<ul>
<li>How far away is a typical point?</li>
<li>Write a function that takes the matrix of points and the “our point” and finds the distance from our point to each and every one of the points in the matrix.</li>
<li>How far away is a typical point in 1-dimensional space?</li>
<li>In 10-dimensional space?</li>
<li>In 100-dimensional space?</li>
</ul>
</div>
<div id="loopsiteration" class="section level2">
<h2><span class="header-section-number">14.4</span> Loops/Iteration</h2>
<p>Loops are the programming control structure that allows you to repeat the same commands many times.</p>
<p><em>A definition of insanity</em>: Doing something over and over again and expecting a different result.</p>
</div>
<div id="parts-of-a-loop" class="section level2">
<h2><span class="header-section-number">14.5</span> Parts of a loop</h2>
<ol style="list-style-type: decimal">
<li><p>Preparation — creating a place to hold the results</p>
<p>This is called the “accumulator.”</p></li>
<li>Identify a set to loop over.</li>
<li>Inside the loop, modify the accumulator</li>
<li><p>When the loop is done, package up the results.</p></li>
</ol>
</div>
<div id="trivial-examples" class="section level2">
<h2><span class="header-section-number">14.6</span> Trivial examples</h2>
<ul>
<li>Find the sum of squares of a vector. (R <code>sum(x^2)</code>)</li>
<li>Find the biggest element of a vector. (R <code>max()</code>)</li>
<li>Generate <span class="math inline">\(k\)</span> random numbers from the set <code>1:n</code> (R <code>sample()</code>)
<ul>
<li>with replacement: pre-allocate result, loop and select</li>
<li>without replacement: shrink the set of possibilities each time.</li>
</ul></li>
<li>Find the <span class="math inline">\(k\)</span>th Fibonacci number:
<ul>
<li>with <code>previous</code> and <code>before_that</code> as the state</li>
<li>with an array as the state: initialize to <code>c(1, 1)</code></li>
<li>with a global array as the state memoization.</li>
<li>with an array created in the capturing environment.</li>
</ul></li>
</ul>
<p>**In practice, we would use the already parallelized R functions. See also <code>Vectorize()</code>.</p>
</div>
<div id="bootstrapping" class="section level2">
<h2><span class="header-section-number">14.7</span> Bootstrapping</h2>
<p>Process</p>
<ul>
<li>Set up accumulator — what should we store? (all coefs)</li>
<li>but we don’t know what this should look like until we’ve tried it out</li>
<li>Loop:</li>
<li>create a new random sample</li>
<li>fit the model</li>
<li>store away the results</li>
<li>Post-process:</li>
<li>Give std-err?</li>
<li>Give covariance matrix?</li>
<li>Give array?</li>
</ul>
</div>
<div id="leave-one-out-cross-validation." class="section level2">
<h2><span class="header-section-number">14.8</span> Leave-one-out cross-validation.</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># preparation</span>
my_data &lt;-<span class="st"> </span>mosaicData::KidsFeet
error &lt;-<span class="st"> </span><span class="kw">numeric</span>(<span class="kw">nrow</span>(my_data))

<span class="co"># The looping set: each row in my_data</span>
for (k in <span class="dv">1</span>:<span class="kw">nrow</span>(my_data)) {
  <span class="co"># the body of the loop</span>
  mod &lt;-<span class="st"> </span><span class="kw">lm</span>(width ~<span class="st"> </span>length *<span class="st"> </span>sex, <span class="dt">data =</span> my_data[ -k, ])
  mod_value &lt;-<span class="st"> </span><span class="kw">predict</span>(mod, <span class="dt">newdata =</span> my_data[k, ])
  error[k] &lt;-<span class="st"> </span>my_data$width[k] -<span class="st"> </span>mod_value
}

<span class="co"># packaging up the results</span>
result &lt;-<span class="st"> </span><span class="kw">sum</span>(error^<span class="dv">2</span>)</code></pre></div>
<p>Look at the result:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result</code></pre></div>
<pre><code>## [1] 6.304381</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">regular_model &lt;-<span class="st"> </span><span class="kw">lm</span>(width ~<span class="st"> </span>length *<span class="st"> </span>sex, <span class="dt">data =</span> my_data)
<span class="kw">sum</span>(<span class="kw">resid</span>(regular_model)^<span class="dv">2</span>)</code></pre></div>
<pre><code>## [1] 5.329327</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">anova</span>(regular_model)</code></pre></div>
<pre><code>## Analysis of Variance Table
## 
## Response: width
##            Df Sum Sq Mean Sq F value   Pr(&gt;F)    
## length      1 4.0557  4.0557 26.6353 9.86e-06 ***
## sex         1 0.4790  0.4790  3.1456  0.08484 .  
## length:sex  1 0.0037  0.0037  0.0246  0.87638    
## Residuals  35 5.3293  0.1523                     
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>In ANOVA, we use a degrees of freedom to adjust for the under-estimate of residuals.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(<span class="kw">resid</span>(regular_model)^<span class="dv">2</span>) /<span class="st"> </span><span class="dv">35</span></code></pre></div>
<pre><code>## [1] 0.1522665</code></pre>
<p>In leave-one-out, we can simply average the errors:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result /<span class="st"> </span><span class="dv">38</span></code></pre></div>
<pre><code>## [1] 0.1659048</code></pre>
</div>
<div id="building-a-package" class="section level2">
<h2><span class="header-section-number">14.9</span> Building a package</h2>
<p>Divide up into groups of two or three.</p>
<ol style="list-style-type: decimal">
<li>Open a new project: choose “new directory”, “choose R package”</li>
<li>Go to the “Build” tab, select More/Configure Build Tools and fill in the checkmark for Roxygen comments.</li>
<li>Write functions for <span class="math inline">\(C_p\)</span>, <span class="math inline">\(AIC\)</span>, <span class="math inline">\(BIC\)</span>, and adjusted <span class="math inline">\(R^2\)</span>. The function should take a model as input.</li>
<li>Document the functions.</li>
<li>Compile the package.</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="support-vector-classifiers.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendices.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/dtkaplan/math253/edit/master/850-Programming.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
